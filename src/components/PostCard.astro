---
import type { CollectionEntry } from "astro:content";

// import { readingTime } from "lesetid";
import readingTime from "reading-time";
import Card from "./Card.astro";
import CalendarIcon from "~icons/carbon/Calendar";
import AlarmIcon from "~icons/carbon/Alarm";

export interface Props {
  post: CollectionEntry<"posts">
}

const {
  post: {
    data: { title, description, date, handle },
    slug,
    body,
  },
} = Astro.props;

const formattedDate = new Date(date).toLocaleDateString("en-US", {
  year: "numeric",
  month: "long",
  day: "numeric",
});
const time = readingTime(body);
---

<Card href={`/posts/${handle || slug}`} class="flex flex-col">
  <h3 class="!my-0">{title}</h3>

  <p class="flex-1">{description}</p>

  <span class="flex items-center gap-x-1">
    <CalendarIcon />
    {formattedDate}
  </span>
  <span class="flex items-center gap-x-1">
    <AlarmIcon />
    {time.text}
  </span>
</Card>
