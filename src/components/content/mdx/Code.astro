---
import { CopyToClipboard } from "./CopyToClipboard"

const id = Math.random().toString(36).slice(2, 9)

const html = await Astro.slots.render("default")

const regex = /<([a-z][a-z0-9]*)\b[^>]*>(.*?)<\/\1>/g
const match = html.match(regex)

let fragmentClass = ""
if (!match) {
  fragmentClass = "rounded p-1 bg-gray-400/10"
}
---

<code id={id} class={fragmentClass}><Fragment set:html={html} /></code>

<CopyToClipboard client:load id={id} />
